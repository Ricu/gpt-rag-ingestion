# ==============================================================================
# MINIMAL LOCAL SETUP for GPT-RAG Ingestion
# ==============================================================================
# Copy this file to .env and fill in your Azure resource values

# ==============================================================================
# AUTHENTICATION (Local Development)
# ==============================================================================
# Run "az login" in your terminal before starting the app
# The app will use your Azure CLI credentials automatically

# If you prefer to use Service Principal authentication instead:
# AZURE_TENANT_ID=your-tenant-id
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret

# ==============================================================================
# AZURE APP CONFIGURATION (Primary Config Source)
# ==============================================================================
# This is required - all other settings can be stored in App Configuration
APP_CONFIG_ENDPOINT=https://your-appconfig-name.azconfig.io

# Alternative: Use connection string if endpoint doesn't work
# AZURE_APPCONFIG_CONNECTION_STRING=Endpoint=https://...;Id=...;Secret=...

# ==============================================================================
# STORAGE ACCOUNT
# ==============================================================================
STORAGE_ACCOUNT_NAME=yourstorageaccount
DOCUMENTS_STORAGE_CONTAINER=documents
JOBS_LOG_CONTAINER=jobs

# Optional: filter to only process files with this prefix
# BLOB_PREFIX=mydata/

# ==============================================================================
# AZURE AI SEARCH
# ==============================================================================
SEARCH_SERVICE_QUERY_ENDPOINT=https://your-search-service.search.windows.net
AI_SEARCH_INDEX_NAME=your-index-name

# ==============================================================================
# AZURE OPENAI (for embeddings)
# ==============================================================================
AZURE_OPENAI_ENDPOINT=https://your-aoai-resource.openai.azure.com
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# ==============================================================================
# AZURE DOCUMENT INTELLIGENCE (for PDF processing)
# ==============================================================================
DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-doc-intelligence.cognitiveservices.azure.com

# ==============================================================================
# SCHEDULER (CRON expressions)
# ==============================================================================
# Run blob indexer every hour
CRON_RUN_BLOB_INDEX=0 * * * *

# Run blob purger daily at 2 AM
CRON_RUN_BLOB_PURGE=0 2 * * *

# Optional: Set timezone (defaults to system timezone)
# SCHEDULER_TIMEZONE=America/New_York

# Disable other data sources by leaving these unset:
# CRON_RUN_SHAREPOINT_INDEX=
# CRON_RUN_SHAREPOINT_PURGE=
# CRON_RUN_IMAGES_PURGE=
# CRON_RUN_NL2SQL_INDEX=
# CRON_RUN_NL2SQL_PURGE=

# ==============================================================================
# API SECURITY
# ==============================================================================
# Generate a secure random key for the X-API-KEY header
INGESTION_APP_APIKEY=your-secure-random-key-here

# ==============================================================================
# PERFORMANCE TUNING (Optional)
# ==============================================================================
# How many files to process in parallel
INDEXER_MAX_CONCURRENCY=8

# How many chunks to upload to AI Search in each batch
INDEXER_BATCH_SIZE=500

# ==============================================================================
# MONITORING (Optional)
# ==============================================================================
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...

# ==============================================================================
# ADVANCED OPTIONS (Optional)
# ==============================================================================
# Enable multimodal processing (images)
# MULTIMODAL=false

# Allow environment variables to override App Configuration
# allow_environment_variables=true
